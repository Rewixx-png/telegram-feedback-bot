 # Телеграм бот для обратной связи (Feedback Bot)

Простой и удобный Telegram бот для организации обратной связи или поддержки пользователей, написанный на Python с использованием библиотеки [Aiogram 3.x](https://github.com/aiogram/aiogram).

## Принцип работы

1.  Пользователь пишет любое сообщение боту в личный чат.
2.  Бот пересылает это сообщение в специальную закрытую группу (чат для логов), создавая для каждого нового пользователя отдельную **тему (топик)**.
3.  Все последующие сообщения от этого же пользователя попадают в его же тему, сохраняя историю переписки.
4.  Владелец бота видит сообщение в группе, заходит в тему и отвечает на него через функцию "Ответить".
5.  Бот мгновенно отправляет ответ владельца обратно пользователю в личный чат.

## Функционал

*   Полная анонимность для владельца (пользователь общается только с ботом).
*   Удобная сортировка диалогов по темам (топикам).
*   Простая установка и настройка с использованием виртуального окружения.
*   Сохранение истории переписки с каждым пользователем в отдельном месте.

---

## Установка и запуск

### 1. Клонирование репозитория

Склонируйте репозиторий на ваш сервер или локальный компьютер:
```bash
git clone https://github.com/Rewixx-png/telegram-feedback-bot.git
cd telegram-feedback-bot
```

### 2. Создание и активация виртуального окружения

Использование виртуального окружения (`venv`) позволяет изолировать зависимости проекта и избежать конфликтов с системными пакетами. Это является стандартом для разработки на Python.

```bash
# Создаем папку для виртуального окружения
python3 -m venv venv

# Активируем его (команда для Linux / macOS)
source venv/bin/activate
```
После активации в начале командной строки появится префикс `(venv)`.

### 3. Установка зависимостей

Находясь в активированном виртуальном окружении, установите все необходимые библиотеки одной командой:
```bash
pip install -r requirements.txt
```

### 4. Настройка конфигурации

Перед запуском необходимо настроить три параметра:

**A. Токен бота**

1.  Получите токен у [@BotFather](https://t.me/BotFather).
2.  Создайте в корневой папке проекта файл `token.txt`.
3.  Вставьте в него **только токен** и ничего больше.

**Б. Настройка `main.py`**

Откройте файл `main.py` и укажите ваши данные в двух переменных:

```python
# Укажи свой числовой ID. Узнать можно у @userinfobot
OWNER_ID = 7485721661 # <-- ЗАМЕНИТЕ НА СВОЙ ID

# Укажи ID чата для логов (ОБЯЗАТЕЛЬНО отрицательное число)
LOG_CHAT_ID = -1002765837683 # <-- ЗАМЕНИТЕ НА ID ВАШЕЙ ГРУППЫ
```

*   **Как узнать `OWNER_ID`?** Отправьте любое сообщение боту [@userinfobot](https://t.me/userinfobot), он пришлет ваш ID.
*   **Как узнать `LOG_CHAT_ID`?**
    1.  Создайте **приватную супергруппу** и включите в ней **Темы (Топики)**.
    2.  Добавьте своего бота в эту группу и **сделайте его администратором** с правом `Управление темами`.
    3.  Напишите в группе любое сообщение и перешлите его боту [@userinfobot]. В ответ он пришлет ID группы (он будет отрицательным, например `-100...`).

### 5. Запуск бота

**Важно:** Перед каждым запуском бота убедитесь, что вы активировали виртуальное окружение (`source venv/bin/activate`).

Для простого запуска выполните команду в терминале:
```bash
python main.py
```

Для того чтобы бот работал постоянно в фоновом режиме, используйте `screen` или `tmux`.

**Пример с `screen`:**
```bash
# Убедитесь, что venv активировано. В терминале должна быть приставка (venv).

# Создаем новую сессию screen с именем "feedback"
screen -S feedback

# Вы перейдете в окно сессии. В нем запускаем бота
python main.py

# Теперь можно спокойно закрыть терминал (нажмите Ctrl+A, затем D). Бот продолжит работать.
# Чтобы вернуться в сессию, используйте команду: screen -r feedback
```

---

## Как пользоваться

### Для пользователя
Просто написать боту любое сообщение.

### Для владельца
1.  Дождаться, пока в группе для логов появится новая тема с сообщением от пользователя.
2.  Зайти в эту тему.
3.  **Обязательно** использовать функцию **"Ответить" (Reply)** на сообщении пользователя, чтобы написать свой ответ.
4.  Бот автоматически перешлет ваш текст пользователю.